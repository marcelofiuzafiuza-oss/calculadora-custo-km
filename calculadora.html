<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Custo por KM Fixo</title>
    <!-- Google Fonts for Arcade Style -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* Estilo Base para o Visual Arcade */
        body {
            background-color: #010114; /* Preto Profundo / Arcade */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Usa min-height para acomodar mais campos */
            margin: 0;
            flex-direction: column;
            font-family: 'Press Start 2P', monospace;
            color: #00ff66; /* Verde Neon */
            user-select: none;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto; /* Permite rolagem para mais campos */
        }

        /* Contêiner Principal com Estilo Neon */
        .arcade-container {
            border: 5px solid #00ccff; /* Borda Azul Neon */
            box-shadow: 0 0 25px #00ccff, inset 0 0 12px #00ccff;
            background-color: #000000;
            padding: 30px;
            border-radius: 10px;
            max-width: 95vw;
            width: 420px; /* Largura para caber os campos */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Título Principal */
        .arcade-container h2 {
            color: #00ff66;
            text-shadow: 0 0 10px #00ff66;
            margin-bottom: 25px;
            font-size: clamp(0.9rem, 4vw, 1.1rem);
            text-align: center;
            line-height: 1.2;
        }

        /* Título de Seção */
        .section-title {
            color: #ff33cc;
            text-shadow: 0 0 8px #ff33cc;
            margin: 20px 0 15px 0;
            font-size: clamp(0.7rem, 3.5vw, 0.9rem);
            text-align: center;
            width: 100%;
            border-bottom: 1px solid rgba(255, 51, 204, 0.5);
            padding-bottom: 5px;
        }

        /* Grupos de Input */
        .input-group {
            margin-bottom: 15px;
            width: 100%;
            max-width: 360px;
            text-align: left;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #00ccff;
            font-size: clamp(0.6rem, 3vw, 0.7rem);
            text-shadow: 0 0 5px #00ccff;
        }

        /* Estilo dos Campos de Input (Valores) */
        .arcade-container input[type="number"] {
            width: 100%;
            padding: 12px;
            background-color: #000000;
            border: 2px solid #ff33cc;
            color: #00ff66;
            font-family: 'Press Start 2P', monospace;
            font-size: clamp(0.8rem, 4vw, 0.9rem);
            box-shadow: 0 0 8px #ff33cc;
            border-radius: 4px;
            text-align: right;
            box-sizing: border-box;
        }
        
        /* Estilo do Botão de Cálculo */
        #calculateButton {
            background-color: #ff33cc;
            color: #000000;
            border: none;
            padding: 12px 25px;
            font-family: 'Press Start 2P', monospace;
            font-size: clamp(0.7rem, 3.5vw, 0.8rem);
            cursor: pointer;
            border-radius: 5px;
            box-shadow: 0 0 10px #ff33cc;
            transition: all 0.1s;
            margin-top: 10px;
            width: 100%;
            max-width: 360px;
        }
        #calculateButton:hover {
            background-color: #ff66e0;
            box-shadow: 0 0 15px #ff66e0;
        }

        /* Área de Exibição do Resultado */
        #resultDisplay {
            margin-top: 30px;
            border-top: 2px solid rgba(255, 0, 255, 0.5);
            padding-top: 20px;
            text-align: center;
            line-height: 1.5;
            width: 100%;
        }
        .result-line {
            font-size: clamp(0.7rem, 3.5vw, 0.9rem);
            color: #ff00ff;
            text-shadow: 0 0 6px #ff00ff;
            margin-bottom: 10px;
            word-break: break-word; /* Para garantir que o texto quebre em telas pequenas */
        }
        .final-result {
            font-size: clamp(1rem, 5vw, 1.2rem);
            color: #00ff66;
            text-shadow: 0 0 10px #00ff66;
            margin-top: 15px;
        }
    </style>
</head>
<body>

<div class="arcade-container">
    <h2>CUSTO FIXO POR KM (MENSAL)</h2>
    
    <div class="section-title">KM MENSAL PARA DISTRIBUIÇÃO</div>

    <div class="input-group">
        <label for="monthlyKm">KM TOTAL PREVISTO NO MÊS (Para distribuir custos fixos):</label>
        <input type="number" id="monthlyKm" placeholder="Ex: 8000" min="1" step="1">
    </div>
    
    <div class="section-title">CUSTOS FIXOS MENSAIS (Valores Totais ou Anuais)</div>

    <!-- CUSTOS ADICIONADOS -->
    <div class="input-group">
        <label for="automotiveAestheticsMonthly">ESTÉTICA AUTOMOTIVA MENSAL (Valor fixo R$):</label>
        <input type="number" id="automotiveAestheticsMonthly" placeholder="Ex: 250" min="0" step="0.01">
    </div>

    <div class="input-group">
        <label for="insuranceMonthlyValue">SEGURO MENSAL (Valor fixo R$):</label>
        <input type="number" id="insuranceMonthlyValue" placeholder="Ex: 500" min="0" step="0.01">
    </div>
    <!-- FIM DOS CUSTOS ADICIONADOS -->

    <div class="input-group">
        <label for="fuelMonthlyCost">CUSTO COM COMBUSTÍVEL MENSAL (Valor fixo R$):</label>
        <input type="number" id="fuelMonthlyCost" placeholder="Ex: 5000" min="0" step="0.01">
    </div>

    <div class="input-group">
        <label for="proLaboreMonthly">PRÓ-LABORE MENSAL (Valor fixo R$):</label>
        <input type="number" id="proLaboreMonthly" placeholder="Ex: 3000" min="0" step="0.01">
    </div>

    <div class="input-group">
        <label for="tireValue">VALOR TOTAL DO CONJUNTO DE PNEUS (R$/3 meses de uso estimado):</label>
        <input type="number" id="tireValue" placeholder="Ex: 3600" min="0" step="0.01">
    </div>

    <div class="input-group">
        <label for="foodExpense">GASTO ALIMENTAÇÃO MENSAL (Valor fixo R$):</label>
        <input type="number" id="foodExpense" placeholder="Ex: 700" min="0" step="0.01">
    </div>

    <div class="input-group">
        <label for="vehicleValue">VALOR DO VEÍCULO (Depreciação R$/12 meses):</label>
        <input type="number" id="vehicleValue" placeholder="Ex: 120000" min="0" step="0.01">
    </div>

    <div class="input-group">
        <label for="oilChangeValue">CUSTO TOTAL DA TROCA DE ÓLEO (R$/2 meses de uso estimado):</label>
        <input type="number" id="oilChangeValue" placeholder="Ex: 600" min="0" step="0.01">
    </div>

    <div class="input-group">
        <label for="installmentValue">PARCELA MENSAL DO VEÍCULO (Valor fixo R$):</label>
        <input type="number" id="installmentValue" placeholder="Ex: 1500" min="0" step="0.01">
    </div>
    
    <div class="input-group">
        <label for="documentationValue">DOCUMENTO ANUAL DO VEÍCULO (IPVA/Licenc. R$/12 meses):</label>
        <input type="number" id="documentationValue" placeholder="Ex: 2400" min="0" step="0.01">
    </div>
    
    <button id="calculateButton">CALCULAR CUSTO FIXO / KM</button>
    
    <div id="resultDisplay">
        <div class="result-line">CUSTO FIXO MENSAL: --</div>
        <div class="final-result">CUSTO FIXO POR KM: --</div>
    </div>
</div>

<script>
    // Obtém os elementos do DOM
    const monthlyKmInput = document.getElementById('monthlyKm');
    const tireValueInput = document.getElementById('tireValue');
    const foodExpenseInput = document.getElementById('foodExpense');
    const vehicleValueInput = document.getElementById('vehicleValue');
    const oilChangeValueInput = document.getElementById('oilChangeValue');
    const installmentValueInput = document.getElementById('installmentValue');
    const documentationValueInput = document.getElementById('documentationValue');
    const fuelMonthlyCostInput = document.getElementById('fuelMonthlyCost');
    const proLaboreMonthlyInput = document.getElementById('proLaboreMonthly');
    const automotiveAestheticsMonthlyInput = document.getElementById('automotiveAestheticsMonthly');
    const insuranceMonthlyValueInput = document.getElementById('insuranceMonthlyValue'); 

    const calculateButton = document.getElementById('calculateButton');
    const resultDisplay = document.getElementById('resultDisplay');

    // Define a cor padrão para os resultados
    const defaultFixedColor = '#ff00ff'; // Roxo Neon
    const defaultTotalColor = '#00ff66'; // Verde Neon
    const errorColor = '#ff0000'; // Vermelho

    // Função auxiliar para criar as linhas de resultado
    function updateResultDisplay(fixedMonthly, fixedPerKm, error = null) {
        if (error) {
            resultDisplay.innerHTML = `<div class="final-result" style="color:${errorColor}; text-shadow:0 0 10px ${errorColor};">${error}</div>`;
            return;
        }

        // Função para formatar o valor como moeda brasileira (R$) com 3 casas decimais
        const formatCurrency = (value) => `R$ ${value.toFixed(3).replace('.', ',')}`;

        resultDisplay.innerHTML = `
            <div class="result-line" style="color:${defaultFixedColor}; text-shadow:0 0 6px ${defaultFixedColor};">CUSTO FIXO MENSAL: ${formatCurrency(fixedMonthly)}</div>
            <div class="final-result" style="color:${defaultTotalColor}; text-shadow:0 0 10px ${defaultTotalColor};">CUSTO FIXO POR KM: ${formatCurrency(fixedPerKm)}</div>
        `;
    }

    function getFloatValue(element) {
        // Retorna 0 se o campo estiver vazio ou não for um número válido
        const value = parseFloat(element.value);
        return isNaN(value) ? 0 : value;
    }

    function calculateFixedCostPerKm() {
        // --- 1. Variável de Distribuição ---
        const monthlyKm = getFloatValue(monthlyKmInput);

        // --- 2. Custos Fixos Mensais (Inputs) ---
        const tireValue = getFloatValue(tireValueInput);
        const foodExpense = getFloatValue(foodExpenseInput);
        const vehicleValue = getFloatValue(vehicleValueInput);
        const oilChangeValue = getFloatValue(oilChangeValueInput);
        const installmentValue = getFloatValue(installmentValueInput);
        const documentationValue = getFloatValue(documentationValueInput);
        const fuelMonthlyCost = getFloatValue(fuelMonthlyCostInput);
        const proLaboreMonthly = getFloatValue(proLaboreMonthlyInput);
        const automotiveAestheticsMonthly = getFloatValue(automotiveAestheticsMonthlyInput);
        const insuranceMonthlyValue = getFloatValue(insuranceMonthlyValueInput); 

        // --- 3. Validação Crucial ---
        if (monthlyKm <= 0) {
            updateResultDisplay(0, 0, "ERRO: KM TOTAL PREVISTO NO MÊS deve ser maior que zero.");
            return;
        }

        // --- 4. Cálculo dos Custos Fixos Mensais ---
        
        // Estética Automotiva: Valor fixo mensal
        const monthlyAestheticsCost = automotiveAestheticsMonthly;
        
        // Seguro: Valor fixo mensal (NÃO DIVIDE POR 12)
        const monthlyInsuranceCost = insuranceMonthlyValue;

        // Custo com Pneu: Valor Total / 3
        const monthlyTireCost = tireValue / 3; 

        // Gasto Alimentação Mensal: Valor inserido
        const monthlyFoodCost = foodExpense;

        // Custo Depreciação: Valor Veículo / 12
        const monthlyDepreciationCost = vehicleValue / 12;

        // Troca de Óleo: Valor / 2
        const monthlyOilCost = oilChangeValue / 2; 

        // Parcela do Veículo: Valor inserido
        const monthlyInstallmentCost = installmentValue;

        // Documento do Veículo: Valor Anual / 12
        const monthlyDocumentationCost = documentationValue / 12;

        // --- 5. Soma Total dos Custos Fixos Mensais ---
        const totalFixedMonthlyCost = monthlyTireCost 
                                    + monthlyFoodCost 
                                    + monthlyDepreciationCost 
                                    + monthlyOilCost 
                                    + monthlyInstallmentCost 
                                    + monthlyDocumentationCost
                                    + fuelMonthlyCost
                                    + proLaboreMonthly
                                    + monthlyAestheticsCost
                                    + monthlyInsuranceCost;

        // --- 6. Cálculo do Custo por KM ---
        
        // Custo Fixo por KM: Distribui o custo mensal sobre o KM total previsto no mês
        const fixedCostPerKm = totalFixedMonthlyCost / monthlyKm;

        // --- 7. Exibe o Resultado ---
        updateResultDisplay(totalFixedMonthlyCost, fixedCostPerKm);
    }

    // Event Listeners: Chama o cálculo ao clicar no botão
    calculateButton.addEventListener('click', calculateFixedCostPerKm);

    // Event Listeners: Chama o cálculo ao pressionar 'Enter' nos campos
    document.querySelectorAll('input[type="number"]').forEach(input => {
        input.addEventListener('keydown', (e) => { 
            if (e.key === 'Enter') calculateFixedCostPerKm(); 
        });
    });

    // Inicialização do estilo de resultado
    window.onload = function() {
        // Inicializa o display com o estilo padrão
        updateResultDisplay(0, 0); 
    };

</script>

</body>
</html>
